
<!doctype html>
<!-- START OF _layouts/default.html -->
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" >
		<meta content="width=device-width,initial-scale=1" name="viewport">
		<meta content="Andrew Hao's thoughts on software engineering, team leadership & product design." name="description">
		<meta content="The Sweet Spot" name="author">

		<title>QConSF: Day Two &mdash; The Sweet Spot</title>

		<!-- Styles -->
		<link href="/stylesheets/main.css" rel="stylesheet">

		<!-- Google webfonts -->
    <link href="https://fonts.googleapis.com/css?family=Cousine|Suez+One|Yellowtail|Space+Mono|Alike+Angular" rel="stylesheet">

		<!-- jQuery and plugins -->
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
		<script src="/js/jquery.zclip.min.js"></script>

		<!-- Syntax highlighter -->
		<link href="/stylesheets/prettify-hemisu.css" type="text/css" rel="stylesheet" />
    <script type="text/javascript" src="/js/prettify.js"></script>

    <link href="/atom.xml" rel="alternate" title="The Sweet Spot" type="application/atom+xml">
    
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-2330913-9']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>



  </head>

	<body onload="prettyPrint()">
		<div class="wrap">

			<header>
        <a href="/"><div class="title">The Sweet Spot</div></a>
				<div class="subtitle">On software, engineering leadership, and anything shiny.</div>

				<div class="navi">
					<ul>
						<li><a href="/blog/archives">Articles</a></li>
						<li><a href="/talks">Talks</a></li>
						<li><a href="/notes">Conference Notes</a></li>
						<li><a href="https://www.github.com/andrewhao">Github</a></li>
						<li><a href="https://twitter.com/andrewhao">Twitter</a></li>
					</ul>
				</div> <!-- // .navi -->
			</header>

				<!-- START OF _layouts/post.html -->

<!-- START OF _includes/article.html -->
<article>
	<header>
		<h1><a href="/notes/2014-11-04-qconsf-day-two.html">QConSF: Day Two</a></h1>
		<time>04 November 2014</time>
	</header>
		<div class="content">
			<h2 id="leslie-lamport-programming-is-more-than-coding">Leslie Lamport: Programming is more than coding</h2>

<ul>
  <li>We should be thinking harder before we start coding. Clear thinking can prevent errors. Fuzzy/wishful thinking can’t.</li>
  <li>How do you think clearly? Write.</li>
  <li>Specifications: help us think clearly.</li>
  <li>Think like a scientist!</li>
</ul>

<h3 id="in-computer-science">In computer science:</h3>

<ul>
  <li>reality is digital systems, processor chips.</li>
  <li>models are turing machines, tc..</li>
  <li>what is a program? code that makes sense to think about itself</li>
  <li>functions in math are not equal to functions in programming languages</li>
  <li>program execution represented as a behavior</li>
  <li>behavior is a sequence of states</li>
  <li>program is a sequence of behaviors</li>
</ul>

<h3 id="productivity">Productivity</h3>

<p>Best place to eliminate code is to think about what you need to do and what you <em>don’t</em> need to do.</p>

<h3 id="how-to-describe-a-set-of-behaviors">How to describe a set of behaviors</h3>

<ul>
  <li>Theorems: behaviors can be described by safety and liveness properties.</li>
  <li>Safety property: something bad doesn’t happen (doesn’t throw exception)</li>
  <li>Liveness property: something good eventually does happen (program eventually returns)</li>
  <li>Errors more likely to occur in safety properties.</li>
  <li>
    <p>current state, next state transition can be described by a formula</p>
  </li>
  <li>Engineers starting to use TLA+ to describe system behaviors</li>
  <li>debug 6 lines of specs better than debugging 850+ LOC.</li>
  <li>when you write specs, you should write formal specs.</li>
  <li>Before you write code, write spec.</li>
  <li>Thus, you write better programs.</li>
</ul>

<h2 id="netflix-rxjava-services">Netflix: RxJava services</h2>

<ul>
  <li>Observables vs Iterables. Push vs Pull.</li>
  <li>Observable is at the core: abstraction of events over sets.
    <ul>
      <li>Prefer Observable over Future because Future is still fragmented in Java ecosystem.</li>
    </ul>
  </li>
  <li>Using Rx services that aggregate granular APIs.</li>
</ul>

<h3 id="cold-finite-streams">Cold finite streams</h3>

<ul>
  <li>Shows an example of observable API - multiple network calls</li>
  <li>Instead of blocking APIs, can do async Observable APIs</li>
  <li>Decouples production from consumption. No matter how you implement</li>
  <li>Very cool example: a Collapser can batch up granular network calls in windows and send them off to a REST API.</li>
  <li>This lets you treat network calls like in-process methods, which goes against typical warnings in distributed systems theory</li>
  <li>Retrieval, transformation</li>
</ul>

<h3 id="error-handling">Error handling</h3>

<ul>
  <li><em>Flow control</em>: You need backpressure when you hop threads. what do you do when you consume slower than producer? Often necessary in UIs</li>
  <li><em>Hot vs Cold source</em>: Hot: emits whether you’re ready or not. mouse event.Cold: emits when requested: HTTP request.</li>
  <li>Approach: block threads. like iterables.</li>
  <li>Hot streams: use temporal operators: like <code>sample</code> or <code>debounce</code></li>
  <li>Buffer, debounce, buffer pattern - can group signals by temporal</li>
  <li><em>Reactive push: hot infinite stream</em>: Buffer by time window, drop some samples if appropriately, do map/reduce on windows</li>
</ul>

<h3 id="mental-shift">Mental shift</h3>

<ul>
  <li>imperative -&gt; functional</li>
  <li>sync -&gt; async</li>
  <li>pull -&gt; push</li>
  <li>Rx doesn’t trivialize concurrency. You need to reason about what’s going on underneath.</li>
</ul>

<h2 id="evolution-to-reactive">Evolution to Reactive</h2>

<h3 id="monolith">Monolith</h3>

<ul>
  <li>OK for small services, startups</li>
  <li>simple at first</li>
  <li>queries are easy</li>
  <li>“if you don’t end up regretting your early tech decisions, you probably overengineered” (so it’s OK!)</li>
</ul>

<h3 id="evolve-to-microservices">Evolve to Microservices</h3>

<p>Microservices: loosely-coupled service oriented architecture with bounded contexts</p>

<ul>
  <li>single purpose</li>
  <li>simple well-defined interface</li>
  <li>modular and independent</li>
  <li>more a grpah of relationships than tiers</li>
  <li>isolated persistence!</li>
  <li>each unit is simple</li>
  <li>helps your company scale. people can hold it in their heads.</li>
</ul>

<h4 id="pros">pros:</h4>
<ul>
  <li>unit is simple</li>
  <li>independent scaling and performance</li>
  <li>independent testing and deployment</li>
  <li>tune performance</li>
</ul>

<h4 id="cons">cons:</h4>
<ul>
  <li>many cooperating units</li>
  <li>many small repos</li>
  <li>requires sophistication around tooling and dep management</li>
  <li>network latency</li>
</ul>

<p>(Not a panacea for everything.)</p>

<h3 id="google-services">Google Services</h3>

<ul>
  <li>all groups are organized into services: gmail, app engine, bigtable</li>
  <li>self-sufficient and autonomous</li>
  <li>layered on each other – empowers engineers to focus on the domains</li>
</ul>

<h3 id="reactive-microservices">Reactive microservices</h3>

<ul>
  <li>first tenet is to be responsive, fail latencies, async nonblocking calls from client</li>
  <li>resilient: redundancy, timeouts, retries. hystrix</li>
  <li>“release it” book my michael nygard</li>
  <li>elastic: can scale up and down according to load.</li>
  <li>message-driven: message passing</li>
  <li>FRP patterns: actor model</li>
  <li>scala/akka + rxjava</li>
</ul>

<h3 id="kixeye-service-chassis">Kixeye service chassis</h3>

<ul>
  <li>Takes a long time to build and deploy a new service</li>
  <li>goal: make it easy to build/deploy new uservice
    <ul>
      <li>configuration</li>
      <li>registration/discovery</li>
      <li>load balancing for downstream services</li>
      <li>failiure management for downstream svc</li>
    </ul>
  </li>
  <li>eureka: service registry</li>
  <li>15m no code to running service in AWS</li>
</ul>

<h3 id="how-to-do-this">How to do this?</h3>

<ul>
  <li>Don’t migrate in one big bang. do it incrementally.</li>
  <li>find your worst scaling bottleneck</li>
  <li>wall it off behind an interface</li>
  <li>replace it</li>
  <li>then do it again</li>
</ul>

<h3 id="process">process</h3>
<ul>
  <li>common chassis</li>
  <li>define service interface. discuss with clients. agree</li>
  <li>prototype: simplest thing that could possibly work. client can integrate with prototype.</li>
  <li>distributed tracing – track a request through multiple services</li>
  <li>network visualization</li>
  <li>dash metrics - scan health</li>
  <li>hystrix and turbine generate nice visualizations</li>
</ul>

<h3 id="other-implications">Other implications</h3>

<ul>
  <li>Can have smaller teams</li>
  <li>teams are autonomous, can make their own technology and implementation choices</li>
  <li>let the team own the HOW</li>
  <li>vendor/customer relationship: friendly, cooperative, but structured</li>
  <li>clear ownership and division of responsibility</li>
  <li>the customer can choose whether to use that service or not. if it’s not the best choice for the client, why are we building/maintaining it?</li>
  <li>We should have market forces inside our companies than outside.</li>
</ul>

<h2 id="paypal-api">Paypal API</h2>

<p>Paypal used to have a fragmented, legacy API ecosystem.<br />
Circa 2012, they began an initiative to standardize and modernize their API infrastructure.</p>

<h3 id="defined-a-target-state">Defined a target state:</h3>
<ul>
  <li>API first</li>
  <li>API as a product</li>
  <li>REST first</li>
</ul>

<h3 id="architecture">Architecture</h3>

<ul>
  <li>Built using facades</li>
  <li>Facades coordinate between internal services (microservices?)</li>
  <li>Tiered approach: experience APIs (facades) and capability APIs (core services)</li>
  <li>How did they assess success? Did a maturity model. Level 1-5</li>
  <li>People got into competitions</li>
  <li>Used DDD - bounded contexts - shared language</li>
  <li>Evolution is more than technology</li>
</ul>


			
			
		</div>
	<footer>
		


		



  
		
			Tagged under
		
    <a class='category' href='/category/conference/'>conference</a>, <a class='category' href='/category/notes/'>notes</a>, <a class='category' href='/category/qconsf/'>qconsf</a>
	


	
	
	</footer>
	
</article>
<!-- END OF _includes/article.html -->


  <section class="comments">
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>


<!-- END OF _/layouts/post.html -->


			<footer>
				Copyright &copy; 2017

	Andrew Hao


				

<script type="text/javascript">
      var disqus_shortname = 'g9labs';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://www.g9labs.com/notes/2014-11-04-qconsf-day-two.html';
        var disqus_url = 'http://www.g9labs.com/notes/2014-11-04-qconsf-day-two.html';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





			</footer>

		</div> <!-- // .wrap -->
  </body>

	<script>
		$(document).ready(function() {
			// Make images center
			$('p:has(img)').css('text-align', 'center');

			// Add the image's title attribute as a caption
			$('p:has(img)').append(function () {
				return '<div class="caption">' + ($('img', this).attr('title') || "") + '</div>';
			});

			// Prettify code
			$('code').addClass('prettyprint');
			$('pre code').addClass('linenums');

			// Copy to clipboard with button
			$('pre:has(code)').prepend(function(){
				return '<div class="clip-btn">copy to clipboard</div>';
      });

			$('.clip-btn').zclip({
				path:'/js/ZeroClipboard.swf',
				copy: $(this).next('code').text(),
				afterCopy: function(){
					$(this).replaceWith('<div class="clip-btn">copied!');
					}
			});
		});
	</script>
</html>
<!-- END OF _layouts/default.html -->

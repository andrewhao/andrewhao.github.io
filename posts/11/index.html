
<!doctype html>
<!-- START OF _layouts/default.html -->
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" >
		<meta content="width=device-width,initial-scale=1" name="viewport">
		<meta content="Andrew Hao's thoughts on software engineering, team leadership & product design." name="description">
		<meta content="The Sweet Spot" name="author">

		<title>The Sweet Spot</title>

		<!-- Styles -->
		<link href="/stylesheets/main.css" rel="stylesheet">

		<!-- Google webfonts -->
    <link href="https://fonts.googleapis.com/css?family=Cousine|Suez+One|Yellowtail|Space+Mono|Alike+Angular" rel="stylesheet">

		<!-- jQuery and plugins -->
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
		<script src="/js/jquery.zclip.min.js"></script>

		<!-- Syntax highlighter -->
		<link href="/stylesheets/prettify-hemisu.css" type="text/css" rel="stylesheet" />
    <script type="text/javascript" src="/js/prettify.js"></script>

    <link href="/atom.xml" rel="alternate" title="The Sweet Spot" type="application/atom+xml">
    
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-2330913-9']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>



  </head>

	<body onload="prettyPrint()">
		<div class="wrap">

			<header>
        <a href="/"><div class="title">The Sweet Spot</div></a>
				<div class="subtitle">On software, engineering leadership, and anything shiny.</div>

				<div class="navi">
					<ul>
						<li><a href="/blog/archives">Articles</a></li>
						<li><a href="/talks">Talks</a></li>
						<li><a href="/notes">Conference Notes</a></li>
						<li><a href="https://www.github.com/andrewhao">Github</a></li>
						<li><a href="https://twitter.com/andrewhao">Twitter</a></li>
					</ul>
				</div> <!-- // .navi -->
			</header>

				<!-- START OF index.html -->

	
		
		<!-- START OF _includes/article.html -->
<article>
	<header>
		<h1><a href="/2010/06/02/post-review-git-svn-and-review-board/">post-review, git-svn and Review Board</a></h1>
		<time>02 June 2010</time>
	</header>
		<div class="content">
			<p>Here’s how to set up the excellent VMware-developed open-source <a href="http://www.reviewboard.org/">Review Board</a> and its <code>[post-review](http://www.reviewboard.org/docs/releasenotes/dev/rbtools/0.2/)</code> command line review creation utility to work with git and git-svn on your computer.</p>

<p>My assumption is that you’re working with a local Git repository that is remotely linked to an SVN repository via the <a href="http://utsl.gen.nz/talks/git-svn/intro.html">git-svn</a> bridge. Let’s assume that your master branch is synced with the SVN repository, and you’re working on <code>bug_12345_branch</code>.</p>

<ol>
  <li>
    <p>Make sure you have RBTools installed (<code>sudo easy_install rbtools</code> for me on Ubuntu Linux), and Review Board set up elsewhere.</p>
  </li>
  <li>
    <p>Add a link to your Review Board URL in .git/config:</p>
  </li>
</ol>

<blockquote>

</blockquote>

<blockquote>

  <pre><code>[reviewboard]
 url = &lt;a href="#"&gt;https://(url_for_review_board)/&lt;/a&gt;
</code></pre>

</blockquote>

<ol>
  <li>
    <p>Make sure all your changes in <code>bug_12345_branch</code> have been locally committed.</p>
  </li>
  <li>
    <p><code>post-review -o</code>, and…</p>
  </li>
  <li>
    <p>Voila! You should have a new review up on your Review Board instance.</p>
  </li>
  <li>
    <p>(After you get reviews, you can modify <code>bug_12345_branch</code>, pull the changes into master, and then <code>git svn dcommit</code>, blah, blah, blah.)</p>
  </li>
</ol>


			
			
		</div>
	<footer>
		


		
			andrewhao 
		



  
		
			on
		
    <a class='category' href='/category/andrew-2-dot-0/'>andrew 2.0</a>, <a class='category' href='/category/geek/'>geek</a>, <a class='category' href='/category/linux/'>linux</a>, <a class='category' href='/category/programming/'>programming</a>
	


	
	
	</footer>
	
</article>
<!-- END OF _includes/article.html -->

	
		
		<!-- START OF _includes/article.html -->
<article>
	<header>
		<h1><a href="/2010/04/26/yui-widget-lazy-instantiation/">YUI 3 Widget lazy instantiation</a></h1>
		<time>26 April 2010</time>
	</header>
		<div class="content">
			<p>At work, we make good use of <a href="http://developer.yahoo.com/yui/">YUI 3</a>. It’s a really well-thought-out framework, from sandboxing and deep namespaces to CSS3 selector support and lazy-loading modules through the Yahoo! CDN. One of YUI 3’s biggest features is the Widget framework, which specifies an object on the page that the user can tweak to his or her whims.</p>

<p>Now typically, a YUI widget must be instantiated, then rendered onto the page. The render method is responsible for:</p>

<ol>
  <li>
    <p>Writing the widget’s DOM elements out to the page</p>
  </li>
  <li>
    <p>Binding handlers onto the DOM object.</p>
  </li>
  <li>
    <p>Updating the widget state to match the JS object state.</p>
  </li>
</ol>

<p>(This information didn’t come easily. I had to dig around in some YUI slides and found this in <a href="http://developer.yahoo.com/yui/theater/video.php?v=desai-yuiconf2009-widgets">Satyen Desai’s “A Widget Walkthrough” presentation</a> at YUIConf 2009.)</p>

<p><a href="http://www.g9labs.com/2010/04/27/yui-widget-lazy-instantiation/screenshot5/"><img src="http://www.g9labs.com/wp-content/uploads/2010/04/screenshot5-499x374.png" alt="" /></a></p>

<p>Now we have a page that generates hundreds if not thousands of these tooltips. Instantiating each tooltip, rendering them into the DOM and generating event handlers for each was wasteful and slowed IE browsers down to a crawl. So this brought us to the decision to lazily instantiate each Tooltip instance. My first thought was that I should be able to overwrite the render() method to write to the DOM only after a mouseover onto the Tooltip trigger.</p>

<p>Here’s the folly: note that in the previous slide, the event handlers don’t go live until after the widget HTML is rendered into the DOM. Rats. Is there any way I can get around this?</p>

<p>Here’s some peculiar code for the Tooltip wrapper:</p>

<pre><code>function ttWrapper(triggerNode) {
  this.tt = null;
  /* First mouseover will instantiate the real TooltipWidget. */
  var mOver = Y.on('mouseover', function (e) {
    this.tt = new TooltipWidget(/*config*/).render();
    /* Detach this listener so it won't intercept any more mouseovers */
    mOver.detach();
    /* A second mouseover must be simulated on the real TooltipWidget */
    Y.Event.simulate(triggerNode, 'mouseover'); 
  }, triggerNode);




}
</code></pre>

<p>The code installs a mouseover listener on the trigger node, then swaps itself out for the real mouseover listener that gets attached to the triggerNode when TooltipWidget gets instantiated. Event.simulate() is a strange, yet smart way to solve this problem.</p>

			
			
		</div>
	<footer>
		


		
			andrewhao 
		



  
		
			on
		
    <a class='category' href='/category/andrew-2-dot-0/'>andrew 2.0</a>, <a class='category' href='/category/javascript/'>javascript</a>
	


	
	
	</footer>
	
</article>
<!-- END OF _includes/article.html -->

	
		
		<!-- START OF _includes/article.html -->
<article>
	<header>
		<h1><a href="/2010/04/16/its-official-web-site-becomes-website/">It's official: "Web site" becomes "website"</a></h1>
		<time>16 April 2010</time>
	</header>
		<div class="content">
			<p><a href="http://www.g9labs.com/2010/04/16/its-official-web-site-becomes-website/screenshot1-2/"><img src="http://www.g9labs.com/wp-content/uploads/2010/04/screenshot1-500x350.png" alt="" /></a></p>

<p><a href="http://www.g9labs.com/2010/04/16/its-official-web-site-becomes-website/screenshot1-2/"></a>File this under “Nobody is going to care”, but I’ve always been instructed to write “Web site” in my technical communications class. I found it grating. Hooray for change!</p>

			
			
		</div>
	<footer>
		


		
			andrewhao 
		



  
		
			on
		
    <a class='category' href='/category/andrew-2-dot-0/'>andrew 2.0</a>, <a class='category' href='/category/words/'>words</a>
	


	
	
	</footer>
	
</article>
<!-- END OF _includes/article.html -->

	
		
		<!-- START OF _includes/article.html -->
<article>
	<header>
		<h1><a href="/2010/04/04/i-lovehate-marmite/">I Love/Hate Marmite</a></h1>
		<time>04 April 2010</time>
	</header>
		<div class="content">
			<p>I had my first taste of Marmite last year while in Botswana. My South African roommate loved it, and encouraged me to try it and spread it on my toast. One bite and I gagged. It was like somebody mixed soy sauce and peanut butter and cranked it to 11.</p>

<p>The Marmite company apparently recognizes this dichotomy as well and so runs the advertising campaign accordingly:</p>

<p><a href="http://www.g9labs.com/2010/04/04/i-lovehate-marmite/capture/"><img src="http://www.g9labs.com/wp-content/uploads/2010/04/Capture-500x367.png" alt="" /></a></p>

<p><a href="http://www.g9labs.com/2010/04/04/i-lovehate-marmite/capture-love/"><img src="http://www.g9labs.com/wp-content/uploads/2010/04/Capture-Love-500x367.png" alt="" /></a></p>

<p>Every section of the site is written from a love and a hate perspective. <a href="http://www.marmite.co.uk/">Check it out</a>.</p>

			
			
		</div>
	<footer>
		


		
			andrewhao 
		



  
		
			on
		
    <a class='category' href='/category/advertising/'>advertising</a>
	


	
	
	</footer>
	
</article>
<!-- END OF _includes/article.html -->

	
		
		<!-- START OF _includes/article.html -->
<article>
	<header>
		<h1><a href="/2010/03/14/upgrading-wejoinin-to-unicorn/">Upgrading Wejoinin to unicorn</a></h1>
		<time>14 March 2010</time>
	</header>
		<div class="content">
			<p>(Reposted from the <a href="http://blog.wejoinin.com/2010/03/14/server-transition-nuts-and-bolts/">Wejoinin Blog</a>)</p>

<p>When you run a Web app like Wejoinin on minimal VPS resources (read: we’re too poor to get a beefy server), it forces you to go lean. We started to realize a year ago that our out-of-the-box Rails and nginx/Mongrel setup was starting to show its age; resource utilization would climb every so often and we’d have to kill and restart a Mongrel thread.</p>

<p>Well, with last night’s Wejoinin push, we’ve upgraded our server environment a few ways:</p>

<ol>
  <li>
    <p>We’ve switched to <a href="http://prgmr.com/xen/">prgmr.com with a killer deal</a> on a 512MiB VPS. This is a step up from the 256 slice we used to hold at <a href="www.slicehost.com">Slicehost</a> at almost half the price.</p>
  </li>
  <li>
    <p>We’ve switched from vanilla Ruby to <a href="http://www.rubyenterpriseedition.com/">Ruby Enterprise Edition </a>– advertised to take “33% less memory [when used with Passenger]”. It’s got a tweaked garbage collector, memory allocator and the ability to go in a tweak memory usage settings for yourself.</p>
  </li>
  <li>
    <p>We’ve set up <a href="http://unicorn.bogomips.org/">Unicorn</a>, the new HTTP server on the block. It’s special in that each worker is in its own process, meaning that the load balancing is done natively by the OS. Also, this means that should a worker process start to get bloated, we can take it down gracefully without touching the others. Really. <a href="http://tomayko.com/writings/unicorn-is-unix">We can trust the OS</a>. Plus, <a href="http://github.com/blog/517-unicorn">Git’s doing it</a>.</p>
  </li>
</ol>

<p>With all these tweaks, we should be seeing Wejoinin rarin’ to go. Let us know what you think!</p>

<p>-Andrew</p>

			
			
		</div>
	<footer>
		


		
			andrewhao 
		



  
		
			on
		
    <a class='category' href='/category/andrew-2-dot-0/'>andrew 2.0</a>
	


	
	
	</footer>
	
</article>
<!-- END OF _includes/article.html -->

	
	
<div class="pagination">
	
		<a class="older" href="/posts/12">Older</a>
	
	
	<span class="total">11 of 20</span>
	
	
		<a class="newer" href="/posts/10">Newer</a>
	
</div>
<!-- END OF index.html -->


			<footer>
				Copyright &copy; 2018

	Andrew Hao


				

<script type="text/javascript">
      var disqus_shortname = 'g9labs';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





			</footer>

		</div> <!-- // .wrap -->
  </body>

	<script>
		$(document).ready(function() {
			// Make images center
			$('p:has(img)').css('text-align', 'center');

			// Add the image's title attribute as a caption
			$('p:has(img)').append(function () {
				return '<div class="caption">' + ($('img', this).attr('title') || "") + '</div>';
			});

			// Prettify code
			$('code').addClass('prettyprint');
			$('pre code').addClass('linenums');

			// Copy to clipboard with button
			$('pre:has(code)').prepend(function(){
				return '<div class="clip-btn">copy to clipboard</div>';
      });

			$('.clip-btn').zclip({
				path:'/js/ZeroClipboard.swf',
				copy: $(this).next('code').text(),
				afterCopy: function(){
					$(this).replaceWith('<div class="clip-btn">copied!');
					}
			});
		});
	</script>
</html>
<!-- END OF _layouts/default.html -->

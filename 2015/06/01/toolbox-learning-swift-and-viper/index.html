
<!doctype html>
<!-- START OF _layouts/default.html -->
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" >
		<meta content="width=device-width,initial-scale=1" name="viewport">
		<meta content="A hacker/designer's brain dump about things like Javascript, Ruby, and typography." name="description">
		<meta content="The Sweet Spot" name="author">

		<title>Toolbox: learning Swift and VIPER &mdash; The Sweet Spot</title>

		<!-- Styles -->
		<link href="/stylesheets/main.css" rel="stylesheet">

		<!-- Google webfonts -->
		<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Tangerine">
		<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Cousine">

		<!-- jQuery and plugins -->
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
		<script src="/js/jquery.zclip.min.js"></script>

		<!-- Syntax highlighter -->
		<link href="/stylesheets/prettify-hemisu.css" type="text/css" rel="stylesheet" />
		<script type="text/javascript" src="/js/prettify.js"></script>

		<!--<link href="http://feeds.feedburner.com/turkeltaub" rel="alternate" title="The Sweet Spot" type="application/rss+xml" />-->

	</head>
	<body onload="prettyPrint()">

		<div class="wrap">

			<header>
				<div class="title">The Sweet Spot</div>

				<div class="navi">
					<ul>
						<li><a href="/">Blog</a></li>
						<li><a href="/blog/archives">All Articles</a></li>
					</ul>
				</div> <!-- // .navi -->
			</header>

				<!-- START OF _layouts/post.html -->

<!-- START OF _includes/article.html -->
<article>
	<header>
		<h1><a href="/2015/06/01/toolbox-learning-swift-and-viper/">Toolbox: learning Swift and VIPER</a></h1>
		<time>01 June 2015</time>
	</header>
		<div class="content">
			<p>The following are some notes I&rsquo;m compiling as I&rsquo;m beginning a journey
down the rabbit hole, writing an app in Swift utilizing the <a href="http://www.objc.io/issue-13/viper.html">VIPER app development methodology</a></p>

<ul>
<li><p>I had trouble importing nested source code into XCode before realizing that I
needed to import the folder with corresponding Groups. This is done by
clicking the checkbox &ldquo;Create Groups for any Added Folders&rdquo;</p>

<p><em>Reference</em>: <a href="https://developer.apple.com/library/ios/technotes/iOSStaticLibraries/Articles/configuration.html">https://developer.apple.com/library/ios/technotes/iOSStaticLibraries/Articles/configuration.html</a></p>

<p>Without doing this, the compiler was not able to build the project.</p>

<ul>
<li>Since there is no way to do method swizzling in Swift, there are no real easy ways to do mocking/stubbing the way we used to do so in Ruby. Instead, this is forcing me to rely on plain old Swift structs. There are some simple ways to stub, but it ends up looking kind of awkward and very wiring-intensive like this:</li>
</ul>
</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>class NewRidePresenterSpec: QuickSpec {
</span><span class='line'>  override func spec() {
</span><span class='line'>    describe("#startRecordingGpsTrack") {
</span><span class='line'>      class MockInteractor: NewRideInteractor {
</span><span class='line'>        var wasCalled: Bool = false
</span><span class='line'>
</span><span class='line'>        @objc private override func startRecordingGpsTrack() {
</span><span class='line'>          wasCalled = true
</span><span class='line'>        }
</span><span class='line'>      }
</span><span class='line'>
</span><span class='line'>      var subject = NewRidePresenter()
</span><span class='line'>
</span><span class='line'>      it("tells the interactor to start recording") {
</span><span class='line'>        let mockInteractor = MockInteractor()
</span><span class='line'>        subject.interactor = mockInteractor
</span><span class='line'>        subject.startRecordingGpsTrack()
</span><span class='line'>
</span><span class='line'>        expect(mockInteractor.wasCalled).to(beTrue())
</span><span class='line'>      }
</span><span class='line'>    }
</span><span class='line'>  }
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Using the <a href="https://github.com/teambox/viper-module-generator"><code>vipergen</code></a> and <a href="https://github.com/team-supercharge/boa"><code>boa</code></a> scaffolding generators helped me understand the concepts behind the view.</li>
<li>Tip: Build a VIPER module, but don&rsquo;t build it all at once. Just focus on the Presenter-Interactor-Wireframe component, or the DataStore-Entity-Interactor component. This will keep your head from exploding.</li>
<li>Dude. I miss vim. <a href="http://alcatraz.io/">Alcatraz</a> + xvim helped a little&hellip;</li>
<li>xcodebuild + <a href="https://github.com/supermarin/xcpretty">xcpretty</a> + Guard-shell == some sort of CI feedback loop.</li>
<li>Manually creating mocks in Swift = kind of painful. If you override (subclass) a NSObject in Swift, <a href="http://stackoverflow.com/a/30530308/993929">you must provide it with the <code>@objc</code> pragma, otherwise it throws a segfault error</a></li>
<li>You must contact CircleCI manually if you want to activate an iOS build (it&rsquo;s still in beta). What are some other good CI tools to use with iOS?</li>
</ul>


			
			
		</div>
	<footer>
		


		



  
		
			Tagged under
		
    <a class='category' href='/category/ios/'>ios</a>, <a class='category' href='/category/swift/'>swift</a>, <a class='category' href='/category/viper/'>viper</a>
	


	
	
	</footer>
	
</article>
<!-- END OF _includes/article.html -->


<!-- END OF _/layouts/post.html -->


			<footer>
				Copyright &copy; 2016

	Andrew Hao


			</footer>

		</div> <!-- // .wrap -->
	</body>
	<script>
		$(document).ready(function() {
			// Make images center
			$('p:has(img)').css('text-align', 'center');

			// Add the image's title attribute as a caption
			$('p:has(img)').append(function () {
				return '<div class="caption">' + ($('img', this).attr('title') || "") + '</div>';
			});

			// Prettify code
			$('code').addClass('prettyprint');
			$('pre code').addClass('linenums');

			// Copy to clipboard with button
			$('pre:has(code)').prepend(function(){
				return '<div class="clip-btn">copy to clipboard</div>';
			});
			$('.clip-btn').zclip({
				path:'/js/ZeroClipboard.swf',
				copy: $(this).next('code').text(),
				afterCopy: function(){
					$(this).replaceWith('<div class="clip-btn">copied!');
					}
			});
		});
	</script>
</html>
<!-- END OF _layouts/default.html -->


<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>After site duplication, an .htaccess redirect for old Wordpress posts - The Sweet Spot</title>
  <meta name="author" content="Andrew Hao">

  
  <meta name="description" content="I think I must preface this post with a bit of context: A month ago I added a new blog (blog.andrewhao.com). I wanted that blog to become my personal &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.g9labs.com/2008/03/12/after-site-duplication-an-htaccess-redirect-for-old-wordpress-posts">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="The Sweet Spot" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-2330913-9']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">The Sweet Spot</a></h1>
  
    <h2>Andrew Hao's thoughts about software engineering, design, and anything shiny.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:www.g9labs.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/notes">Notes</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">After site duplication, an .htaccess redirect for old Wordpress posts</h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-03-12T11:46:29-07:00" pubdate data-updated="true">Mar 12<span>th</span>, 2008</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>I think I must preface this post with a bit of context:</p>

<p>A month ago I added a new blog (<a href="http://blog.andrewhao.com">blog.andrewhao.com</a>). I wanted that blog to become my personal blog and let this blog (<a href="http://blog.g9labs.com">blog.g9labs.com</a>) transition into a technical blog.</p>

<p>Here comes a technical post about transforming a personal blog into a technical blog.</p>

<p>So here were the problem(s) I faced:</p>

<ul>
<li><p>Most of my posts here at blog.g9labs.com were of personal nature, many which dated all the way back to 2002, my sophomore year of high school!</p></li>
<li><p>However, I had begun to write technical posts for a year or two&mdash;some thoughts on interface design, an occasional programming trick, cool regex expressions, et cetera.</p></li>
<li><p>Many of my posts have been linked all around the Internet.</p></li>
</ul>


<p>Essentially, I wanted to:</p>

<ul>
<li><p>Move the personal contents of the g9labs blog to the andrewhao blog,</p></li>
<li><p>While keeping all in-links to old g9labs content alive.</p></li>
</ul>


<p>My solution was two-fold:</p>

<ol>
<li><p> I made a copy of my g9Labs<em> blog to the andrewhao blog. This was harder than I anticipated&mdash;I initially expected to simply use the WP export plugin to dump data from g9Labs</em> and import into andrewhao. However, this lost much of my metadata&mdash;comments, categories, tags. So I just decided to completely copy my g9Labs* WP database and WP directory into andrewhao. Yeah, hacky, I know. I&rsquo;m not very proud of it.</p></li>
<li><p> I added an .htaccess file to blog.g9labs.com that did some magic. It identifies requests for posts that are earlier than the date of the blog fork and redirects those requests to andrewhao.com, which is hosting a mirror of the post.</p>

<h1>redirecting requests to posts older than 2008-02-02 to blog.andrewhao.com</h1>

<h1>pass the requester a 301 code (permanently removed)</h1>

<h1>@author: Andrew Hao</h1>

<h1>Lexically compare regex groups $1-$3 with the date: Feb. 03, 2008.</h1>

<h1>Note that the RewriteRule below is reached only if the condition is true.</h1>

<h1>Finally, note that $1-$3 are regex groups from the RewriteRule regex below.</h1>

<p>RewriteCond $1$2$3 &lt;20080203</p>

<h1>Match the incoming request: /YYYY/MM/DD/post-title and redirect the browser</h1>

<h1>to <a href="http://blog.andrewhao.com/YYYY/MM/DD/post-title">http://blog.andrewhao.com/YYYY/MM/DD/post-title</a></h1>

<p>RewriteRule ^([0-9]+)/([0-9]+)/([0-9]+)/([^/]+)/*$ <a href="http://blog.andrewhao.com/$1">http://blog.andrewhao.com/$1</a>
/$2/$3/$4/ [L,R=301]
&hellip; rest of .htaccess &hellip;</p></li>
</ol>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">andrewhao</span></span>

      








  


<time datetime="2008-03-12T11:46:29-07:00" pubdate data-updated="true">Mar 12<span>th</span>, 2008</time>
      

<span class="categories">
  
    <a class='category' href='/category/andrew-2-dot-0/'>Andrew 2.0</a>, <a class='category' href='/category/geek/'>Geek</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://www.g9labs.com/2008/03/12/after-site-duplication-an-htaccess-redirect-for-old-wordpress-posts/" data-via="andrewhao" data-counturl="http://www.g9labs.com/2008/03/12/after-site-duplication-an-htaccess-redirect-for-old-wordpress-posts/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/2008/02/24/quad-core-and-the-nerd/" title="Previous Post: Quad Core and the Nerd">&laquo; Quad Core and the Nerd</a>
      
      
        <a class="basic-alignment right" href="/2008/03/29/tales-from-the-crypt/" title="Next Post: Tales from the crypt">Tales from the crypt &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2016/04/18/the-joy-of-naming-with-the-powers-of-domain-driven-design/">The Joy of Naming</a>
      </li>
    
      <li class="post">
        <a href="/2016/04/08/knex-dot-js-and-bookshelf-dot-js-cheat-sheet/">Knex.js and PostGIS cheat sheet</a>
      </li>
    
      <li class="post">
        <a href="/2016/03/21/lossless-rate-limiting-with-rxjs/">Lossless rate limiting with RxJS</a>
      </li>
    
      <li class="post">
        <a href="/2016/02/17/partitioning-rxjs-streams-adventures-in-nested-observables-with-groupby-and-flatmap/">Partitioning RxJS streams: adventures in nested Observables with groupBy() and flatMap()</a>
      </li>
    
      <li class="post">
        <a href="/2015/09/27/strange-loop-2015-reflections/">Strange Loop 2015: Notes & Reflections</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/andrewhao">@andrewhao</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'andrewhao',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2016 - Andrew Hao -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'g9labs';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://www.g9labs.com/2008/03/12/after-site-duplication-an-htaccess-redirect-for-old-wordpress-posts/';
        var disqus_url = 'http://www.g9labs.com/2008/03/12/after-site-duplication-an-htaccess-redirect-for-old-wordpress-posts/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
